<!doctype html>
<html>

<head>
  <title>Horizontal Bar Chart</title>
  <script src="https://www.chartjs.org/dist/2.9.3/Chart.min.js"></script>
  <script src="https://www.chartjs.org/samples/latest/utils.js"></script>
  <style>
    canvas {
      -moz-user-select: none;
      -webkit-user-select: none;
      -ms-user-select: none;
    }
  </style>
</head>

<body>
<div id="container" style="width: 75%;">
  <canvas id="canvas"></canvas>
</div>
<button id="randomizeData">Randomize Data</button>
<script>

  var data = [
    50,
    100,
    333,
    400,
    666,
    333,
    444
  ]

  var color = Chart.helpers.color;
  var horizontalBarChartData = {
    labels: ['January', 'February', 'March', 'April', 'May', 'June', 'July'],
    datasets: [{
      label: 'Dataset 1',
      backgroundColor: color(window.chartColors.red).alpha(0.5).rgbString(),
      borderColor: window.chartColors.red,
      borderWidth: 1,
      data: data
    }]
  };

  window.onload = function () {
    var ctx = document.getElementById('canvas').getContext('2d');
    window.myHorizontalBar = new Chart(ctx, {
      type: 'horizontalBar',
      data: horizontalBarChartData,
      options: {
        // Elements options apply to all of the options unless overridden in a dataset
        // In this case, we are setting the border of each horizontal bar to be 2px wide
        elements: {
          rectangle: {
            borderWidth: 2,
          }
        },
        responsive: true,
        // Number - Pixel width of the scale line
        scaleLineWidth: 1,

        // Boolean - Whether to show labels on the scale
        scaleShowLabels: true,
        legend: {
          position: 'right',
        },
        title: {
          display: true,
          text: 'Chart.js Horizontal Bar Chart'
        },
        scales: {
          xAxes: [{
            gridLines: {
              offsetGridLines: false,
              show: true,
              color: "rgba(255, 0, 0, 0.05)",
              lineWidth: 10,
              drawOnChartArea: true, // if true, draw these grid lines on the chart area
              drawTicks: true, // if true, draw these grid lines as ticks on the axis
              zeroLineWidth: 1,
              zeroLineColor: "rgba(0,0,0,0.25)",
            },
            ticks: {
              min: 50,
              max: 540
            }
          }]
        }
      }
    });

  };

  document.getElementById('randomizeData').addEventListener('click', function () {
    horizontalBarChartData.datasets.forEach(function (dataset) {
      dataset.data = dataset.data.map(function (number) {
        console.info(number + Math.random() * 1000)
        return number + Math.random() * 1000;
      });
    });
    window.myHorizontalBar.update();
  });

  setInterval(function () {
    horizontalBarChartData.datasets.forEach(function (dataset) {
      dataset.data = dataset.data.map(function (number) {
        console.info(number + Math.random() * 300)
        return number + Math.random() * 300;
      });
      window.myHorizontalBar.options.scales.xAxes[0].ticks.min = Math.min.apply(null, dataset.data);
      window.myHorizontalBar.options.scales.xAxes[0].ticks.max = Math.max.apply(null, dataset.data) + 200;
    });
    window.myHorizontalBar.update();
  }, 300)
</script>
</body>

</html>
